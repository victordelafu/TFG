---
import Layout from '../../layouts/Layout.astro';
import BoatCard from '../../components/BoatCard.astro';
import Filter from '../../components/Filter.astro';

let barcos = [
  { id: '1', nombre: 'Velero Aurora', imagen: '/images/aurora.jpg', precio: 250, tama√±o: 10 },
  { id: '2', nombre: 'Yate Coral', imagen: '/images/coral.jpg', precio: 400, tama√±o: 15 },
  { id: '3', nombre: 'Lancha Sol', imagen: '/images/sol.jpg', precio: 180, tama√±o: 6 },
];
---

<Layout>
  <section class="max-w-6xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-6">Todos los barcos disponibles üõ•Ô∏è</h1>

    <Filter />

    <div id="barco-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {barcos.map(barco => (
        <BoatCard {...barco} />
      ))}
    </div>
  </section>

  <script type="module">
    const barcos = JSON.parse({JSON.stringify(barcos)});
    const contenedor = document.getElementById("barco-grid");

    window.addEventListener("filtros-aplicados", (event) => {
      const { tama√±o, precioMax } = event.detail;

      const filtrados = barcos.filter(barco => {
        return (!tama√±o || barco.tama√±o >= parseInt(tama√±o)) &&
               (!precioMax || barco.precio <= parseInt(precioMax));
      });

      contenedor.innerHTML = filtrados.map(b => `
        <a href="/boats/${b.id}" class="block bg-white rounded-xl shadow hover:shadow-lg transition overflow-hidden">
          <img src="${b.imagen}" alt="${b.nombre}" class="w-full h-48 object-cover" />
          <div class="p-4">
            <h2 class="text-lg font-bold">${b.nombre}</h2>
            <p class="text-primary font-semibold">‚Ç¨${b.precio}/d√≠a</p>
          </div>
        </a>
      `).join('');
    });
  </script>
</Layout>
