---
import ClienteLayout from '../../layouts/ClienteLayout.astro';
import BoatCard from '../../components/BoatCard.astro';

const barcos = [
  { id: 1, nombre: "Mar Azul", imagen: "/barcos/1.jpg", precio: 150 },
  { id: 2, nombre: "Navegante", imagen: "/barcos/2.jpg", precio: 200 },
  { id: 3, nombre: "Sol y Mar", imagen: "/barcos/3.jpg", precio: 175 },
  { id: 4, nombre: "Velero del Sur", imagen: "/barcos/4.jpg", precio: 210 },
];
---

<ClienteLayout>
  <section class="max-w-6xl mx-auto px-4 py-10 pt-[6.5rem]">
    <h1 class="text-3xl font-bold mb-6">Tus favoritos</h1>

    <div id="contenedor-favoritos" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {barcos.map(barco => (
        <div class="boat-card" data-id={barco.id}>
          <BoatCard {...barco} />
        </div>
      ))}
    </div>

    <div id="sin-favoritos" class="text-center text-gray-600 mt-10 hidden">
      <p class="text-xl">No tienes barcos en favoritos todavía.</p>
      <a href="Index" class="text-accent underline hover:text-alternative mt-2 inline-block">
        Ver barcos disponibles →
      </a>
    </div>
  </section>

  <script type="module">
    const favoritos = JSON.parse(localStorage.getItem("favoritos") || "[]");
    const cards = document.querySelectorAll(".boat-card");
    let visibles = 0;

    cards.forEach(card => {
      const id = card.dataset.id;
      if (!favoritos.includes(id)) {
        card.style.display = "none";
      } else {
        visibles++;
      }
    });

    if (visibles === 0) {
      document.getElementById("sin-favoritos").classList.remove("hidden");
    }
  </script>
</ClienteLayout>
