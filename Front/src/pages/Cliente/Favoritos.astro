---
import ClienteLayout from '../../layouts/ClienteLayout.astro';
import BoatCard from '../../components/BoatCard.astro';

// Todos los barcos disponibles
const barcos = [
  { id: '1', nombre: 'Velero Aurora', imagen: '/images/aurora.jpg', precio: 250 },
  { id: '2', nombre: 'Yate Coral', imagen: '/images/coral.jpg', precio: 400 },
  { id: '3', nombre: 'Lancha Sol', imagen: '/images/sol.jpg', precio: 180 },
  { id: '4', nombre: 'Catamarán Brisa', imagen: '/images/brisa.jpg', precio: 320 },
];
---

<ClienteLayout>
  <section class="max-w-6xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-6">Tus favoritos</h1>

    <div id="contenedor-favoritos" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {barcos.map(barco => (
        <div class="boat-card" data-id={barco.id}>
          <BoatCard {...barco} />
        </div>
      ))}
    </div>

    <div id="sin-favoritos" class="text-center text-gray-600 mt-10 hidden">
      <p class="text-xl">No tienes barcos en favoritos todavía.</p>
      <a href="/boats" class="text-accent underline hover:text-alternative mt-2 inline-block">
        Ver barcos disponibles →
      </a>
    </div>
  </section>

  <script type="module">
    const favoritos = JSON.parse(localStorage.getItem("favoritos") || "[]");
    const cards = document.querySelectorAll(".boat-card");
    let visibles = 0;

    cards.forEach(card => {
      const id = card.dataset.id;
      if (!favoritos.includes(id)) {
        card.style.display = "none";
      } else {
        visibles++;
      }
    });

    if (visibles === 0) {
      document.getElementById("sin-favoritos").classList.remove("hidden");
    }
  </script>
</ClienteLayout>
