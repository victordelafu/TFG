---

import Layout from "../layouts/ClienteLayout.astro";
import BarcoCard from '../components/BoatCard.astro';
import Filter from '../components/Filter.astro';


const barcos = [
  { id: 1, nombre: "Mar Azul", imagen: "/barcos/1.jpg", precio: 150 },
  { id: 2, nombre: "Navegante", imagen: "/barcos/2.jpg", precio: 200 },
  { id: 3, nombre: "Sol y Mar", imagen: "/barcos/3.jpg", precio: 175 },
  { id: 4, nombre: "Velero del Sur", imagen: "/barcos/4.jpg", precio: 210 },
];
---


 <Layout>
  
  <section class="max-w-6xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-6">Navega con tu barco favorito</h1>

    <Filter />

    <div id="barco-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {barcos.map(barco => (
        <BarcoCard {...barco} />
      ))}
    </div>
  </section>
  <script type="module">
    const barcos = JSON.parse({JSON.stringify(barcos)});
    const contenedor = document.getElementById("barco-grid");

    window.addEventListener("filtros-aplicados", (event) => {
      const { tamaño, precioMax } = event.detail;

      const filtrados = barcos.filter(barco => {
        return (!tamaño || barco.tamaño >= parseInt(tamaño)) &&
               (!precioMax || barco.precio <= parseInt(precioMax));
      });

      contenedor.innerHTML = filtrados.map(b => `
        <a href="/boats/${b.id}" class="block bg-white rounded-xl shadow hover:shadow-lg transition overflow-hidden">
          <img src="${b.imagen}" alt="${b.nombre}" class="w-full h-48 object-cover" />
          <div class="p-4">
            <h2 class="text-lg font-bold">${b.nombre}</h2>
            <p class="text-primary font-semibold">€${b.precio}/día</p>
          </div>
        </a>
      `).join('');
    });
  </script>
</Layout>